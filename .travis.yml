---
language: perl
perl:
  - '5.22'
  - '5.20'
  - '5.18'
sudo: required
before_install:
  - |
      f_install_navel_dep() {
          local repo_url

          for dep in "${@}" ; do
              repo_url="https://github.com/navel-it/${dep}.git"

              cpanm --quiet --installdeps --notest "${repo_url}" && \
              cpanm --quiet "${repo_url}"
          done
      }
  - f_install_navel_dep navel-base navel-base-daemon navel-mojolicious-plugin-json-xs navel-mojolicious-plugin-logger navel-mojolicious-plugin-swagger2-stdresponses navel-logger navel-api navel-event navel-anyevent-pool navel-bcb
  - cpanm --quiet --notest Devel::Cover::Report::Coveralls
after_success:
  - cover -test -report coveralls
notifications:
  email: false
