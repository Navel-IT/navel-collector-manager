---
language: perl
perl:
  - '5.22'
  - '5.20'
  - '5.18'
sudo: required
before_install:
  - |
      f_install_navel_dep() {
          local cpanm_chain=()

          for dep in "${@}" ; do
              cpanm_chain+=("https://github.com/navel-it/${dep}")
          done

          cpanm --quiet --installdeps --notest "${cpanm_chain[@]}" && \
          cpanm --quiet "${cpanm_chain[@]}"
      }
  - f_install_navel_dep navel-base navel-base-daemon navel-mojolicious-plugin-json-xs navel-mojolicious-plugin-logger navel-mojolicious-plugin-swagger2-stdresponses navel-logger navel-api navel-event navel-anyevent-pool navel-bcb
  - cpanm --quiet --notest Devel::Cover::Report::Coveralls
after_success:
  - cover -test -report coveralls
notifications:
  email: false
